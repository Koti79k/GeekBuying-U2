<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="commonstyles.css">
<link rel="stylesheet" href="./style/navbar.css">
<body>
    <div id="navbar-top">

    </div>
    <div id="banner">
        <img src="https://img.gkbcdn.com/s3/bn/2206/1500x125-62a9512c2b40c91d488eee03.jpg">
    </div>
    <div id="mainalpha">
    <div id="prodimg">
    </div>
    <div id="details">
    
    </div>
   
</div>
<div id="extra">
    <div class="extrap"><a href="#description"><h3 >Description</h3></a></div>
    <div class="extrap"><a href="#reviews"><h3>Reviews</h3></a></div>
    <div class="extrap">    <a href="#QnA"><h3>QnA</h3></a></div>
</div>
<h2 class="highlights">Highlights</h2>
<div id="description"></div>
<h2 class="highlights">Customer Reviews</h2>
<div id="reviews">
    User 1:     &emsp; Lorem ipsum dolor, sit amet consectetur adipisicing elit. Rerum placeat magnam maxime vero perspiciatis quod, fuga cum vel dolores, ex ipsa! Adipisci quis cumque impedit, enim necessitatibus reiciendis. Maiores, autem.<br><br><hr>
    User 2:     &emsp; Lorem ipsum dolor, sit amet consectetur adipisicing elit. Rerum placeat magnam maxime vero perspiciatis quod, fuga cum vel dolores, ex ipsa! Adipisci quis cumque impedit, enim necessitatibus reiciendis. Maiores, autem.<br><br><hr>
    User 3:     &emsp; Lorem ipsum dolor, sit amet consectetur adipisicing elit. Rerum placeat magnam maxime vero perspiciatis quod, fuga cum vel dolores, ex ipsa! Adipisci quis cumque impedit, enim necessitatibus reiciendis. Maiores, autem.<br>
</div>
<h2 class="highlights">Questions & Answers</h2>
<div id="QnA">
    <p>Temporarily no Discussion</p>
</div>    
</body>
</html>
<script type="module">

    import {navbar,footer} from "./navbar/navbar.js"
     document.getElementById("navbar-top").innerHTML = navbar()
      //------------------------------------------------------------------------//
    let images=['https://www.tronsmart.com/3535-thickbox_default/tronsmart-element-mega-bluetooth-speaker.jpg',
    'https://www.tronsmart.com/2215-thickbox_default/tronsmart-element-mega-bluetooth-speaker.jpg',
    'https://www.tronsmart.com/2218-thickbox_default/tronsmart-element-mega-bluetooth-speaker.jpg'

    ]
    let items=JSON.parse(localStorage.getItem("addcart"))||[];
    console.log(items)
    let obj={
        image:'https://img.gkbcdn.com/p/2019-01-31/tronsmart-element-mega-bluetooth-speaker-black-1571991584812._w280_p1_.jpg',
        detail:'Tronsmart Element Mega SoundPulse 40W',
        fullname:'Tronsmart Element Mega SoundPulse™ Bluetooth 5.0 Speaker with Powerful 40W Max Output 3D Digital Sound TWS Intuitive Touch Control - Black',
        brand:"Tronsmart",
        original:'3542',
        beforeprice:"5394",
        discpercent:"34",
        count:1,
        rating:'4.98 328 Reviews ',
        descriptionimg:'https://img.gkbcdn.com/s3/d/201911/95f2e6b8-c69e-4b0e-90e9-ed2ad94bf37a.jpg',
        description:`Intuitive Touch Panel with Gesture Control

Fully integrated touch panel with unique slide-to-control volume mechanism.

High-fidelity Sound

28 core high-fidelity large subwoofer horn capable of producing louder output up to 40W.

3D Digital Sound & DSP Technology

3D digital sound integrated with DSP technology for pitch perfect output in any setting of your living environment.

Bluetooth 5.0

Equipped Bluetooth 5.0 for optimal connection with all your device.

True Wireless Stereo (TWS)

Compatible with True Wireless Stereo (TWS)

Supports NFC

Supports NFC connecting.`,


    }
    import {sshow,descrip} from "./appendfetch.js";
    let product_cont=document.querySelector('#details');
    let title=document.createElement('h4')
    title.innerText=obj.fullname;
    let div1=document.createElement('div');
    div1.id='rating';

    let star=     document.createElement('img')
    star.src='./download.png';
    star.className='icons'
    let rating=     document.createElement('p')
    rating.innerText=`${obj.rating} `;
    let brand = document.createElement('p');
    brand.innerText= `Brand: ${obj.brand}`

    div1.append(star,rating,brand)


    let div2=document.createElement("div")
    div2.id='flashdeal'
    let tbolt=     document.createElement('img')
    tbolt.className='icons'
    tbolt.src="./thunderbolt.jpg"

    let flashdeal=document.createElement('h4')
    flashdeal.id="fdtext"
    flashdeal.innerText=`Flashdeal`

    let div21=document.createElement('div');
    div21.id="timers"
    let timer1=     document.createElement('h4');
    let timer2=     document.createElement('h4')
    timer1.innerText="Ends in 1 day 10 : 10 :";
    timer2.innerText=" 0";

    //TO display timer
    function timer(){
        let i=59
        let j=10;
        let id=setInterval(function(){
            
            // console.log(i)
                if(j==0){
                // h.innerText="0"
                clearInterval(id)
            }
            
            timer2.innerText=` ${i} `;
            i--;

            if(i==0){
                j--;
                timer1.innerText="Ends in 1 day 10 : "+j+" : ";
                i=60;
            }
        },1000)
    }
    timer();
    div21.append(timer1,timer2)
    div2.append(tbolt,flashdeal,div21)

    let price=document.createElement('div');
    price.id="price"
    price.innerHTML=`<p id="actprice">₹${obj.original}</p> 
    <p id="origprice">₹<s>${obj.beforeprice}</s></p>
    <p id="discpercent">${obj.discpercent}% OFF</p>
    `


    //-------------------------------------------------------------------------------//
    let counter=document.createElement('div');
    counter.id="counter"
    let count=obj.count;

    let qty=document.createElement('div');
    qty.innerHTML=`QTY : `
    let countdisplay=document.createElement('div');
    countdisplay.id="count"
    countdisplay.innerText=count;
    let incb=document.createElement("div")
    incb.id="countplus"
    incb.innerText="+"
    let decb=document.createElement("div")
    decb.innerText="-"
    decb.id="countminus"

    decb.addEventListener("click", decFun);

  function decFun() {
    if(count==1)
    count=1;
    else
    count--;
    countdisplay.innerText = count;
    obj.count=count;
    // localStorage.setItem("counterValue", count);
  }

  incb.addEventListener("click", incFun);

  function incFun() {
    count++;
    countdisplay.innerText = count;
    obj.count=count;
    // localStorage.setItem("counterValue", count);
  }
  counter.append(qty,decb,countdisplay,incb)
  //--------------------------------------------------------------------------------------//
    let shipping=document.createElement("p")
    shipping.id="shipping"
    shipping.innerText="Shipping within 3-5 days, Delivery within 10 days"

    let buycart=document.createElement("div")
    buycart.id="buycart"
    let bt1=document.createElement("button")
    bt1.id="addcart"
    let bt2=document.createElement('button')
    bt2.id="buynow"
    bt1.innerText="Add to Cart"
    bt2.innerText="Buy Now"

    bt1.addEventListener("click",buy)
    
    buycart.append(bt1,bt2)

    let payment=document.createElement("div")
    payment.id="payment"
    let pay=document.createElement("p")
    pay.innerText="Payment: "
    pay.style.marginTop="3%"
    let paypal=document.createElement('img')
    paypal.src="./paypal.png"
    paypal.id="iconpay"

    payment.append(pay,paypal)


    product_cont.append(title,div1,div2,price,counter,shipping,buycart,payment)
    let container=document.querySelector("#prodimg");
    sshow(container,images)
    let description=document.getElementById("description")
    descrip(description,obj)

    function buy(){
    if(items.length==0||items[items.length-1].detail!==obj.detail)
    items.push(obj)
    else
    items[items.length-1]=obj;
    localStorage.setItem("addcart",JSON.stringify(items))
    
    document.getElementById("noofpro").innerText=items.length;
    alert("Product added successfully")
}
//to redirect to cart page
bt2.addEventListener("click",()=>{
        window.location.href="cart.html"
    })
    
    //to check and display name in navbar
    var user = JSON.parse(localStorage.getItem("user"))
if(user.name ==null){
  document.getElementById("signin").innerText = "signin"
}
else{
  document.getElementById("signin").innerText = user.name
}

document.getElementById("noofpro").innerText = items.length
</script>